# Release v1.7.0 - Nouvelles APIs Unified Catalog

## üìÖ Date de publication
**28 janvier 2026**

## üéØ Vue d'ensemble

Cette version ajoute le support de **6 nouvelles APIs** Microsoft Purview Unified Catalog (2025-09-15-preview), portant la couverture API de **81% √† 96%**. Ces nouvelles fonctionnalit√©s am√©liorent significativement la navigation, l'analyse et la visualisation des m√©tadonn√©es.

---

## ‚ú® Nouvelles fonctionnalit√©s

### 1. üìö List Hierarchy Terms

Visualisation compl√®te de la hi√©rarchie du glossaire sous forme d'arbre interactif.

**Commande CLI** :
```bash
pvw uc term hierarchy [--domain-id <guid>] [--max-depth <int>] [--include-draft]
```

**Cas d'usage** :
- Navigation arborescente du glossaire
- Export de la taxonomie compl√®te
- Documentation des structures parent-enfant
- Validation des hi√©rarchies

**Client Python** :
```python
client.get_terms_hierarchy(args)
```

**Endpoint** :
```
GET /datagovernance/catalog/terms/hierarchy
```

---

### 2. üìä Get Term Facets

Statistiques agr√©g√©es sur les termes du glossaire (status, domain, owner, acronyms).

**Commande CLI** :
```bash
pvw uc term facets [--domain-id <guid>] [--facet-fields <field>...]
```

**Cas d'usage** :
- Dashboards de m√©triques glossaire
- Filtres de recherche avanc√©e
- Rapports de gouvernance
- Analyse de la qualit√© des m√©tadonn√©es

**Client Python** :
```python
client.get_term_facets(args)
```

**Endpoint** :
```
GET /datagovernance/catalog/terms/facets
```

---

### 3. üîí Get CDE Facets

Statistiques agr√©g√©es sur les Critical Data Elements (criticalityLevel, complianceFramework, status).

**Commande CLI** :
```bash
pvw uc cde facets [--domain-id <guid>] [--facet-fields <field>...]
```

**Cas d'usage** :
- Dashboards de conformit√© (GDPR, HIPAA, SOC2)
- √âvaluation des risques
- Rapports r√©glementaires
- Surveillance des donn√©es sensibles

**Client Python** :
```python
client.get_cde_facets(args)
```

**Endpoint** :
```
GET /datagovernance/catalog/criticalDataElements/facets
```

---

### 4. üîó List Related Entities

Liste compl√®te de toutes les relations d'un terme (synonyms, related terms, parents).

**Commande CLI** :
```bash
pvw uc term relationships --term-id <guid> [--relationship-type <type>]
```

**Cas d'usage** :
- Visualisation de graphe des relations
- Impact analysis avant suppression
- Navigation entre termes li√©s
- Audit des connexions

**Client Python** :
```python
client.list_related_entities(args)
```

**Endpoint** :
```
GET /datagovernance/catalog/terms/{termId}/relationships
```

---

### 5. üì¶ Get Data Product Facets

Statistiques agr√©g√©es sur les Data Products (status, domain, dataAssetCount, owner).

**Commande CLI** :
```bash
pvw uc dataproduct facets [--domain-id <guid>] [--facet-fields <field>...]
```

**Cas d'usage** :
- Dashboards de portefeuille produits
- Analytics de distribution
- Filtres de recherche avanc√©e
- M√©triques de gouvernance

**Client Python** :
```python
client.get_data_product_facets(args)
```

**Endpoint** :
```
GET /datagovernance/catalog/dataProducts/facets
```

---

### 6. üéØ Get Objective Facets

Statistiques agr√©g√©es sur les Objectives/OKRs (status, period, progressPercentage, owner).

**Commande CLI** :
```bash
pvw uc objective facets [--domain-id <guid>] [--facet-fields <field>...]
```

**Cas d'usage** :
- Dashboards OKR avec m√©triques de sant√©
- Suivi de performance et progression
- Identification des objectifs √† risque
- Analyse par p√©riode

**Client Python** :
```python
client.get_objective_facets(args)
```

**Endpoint** :
```
GET /datagovernance/catalog/objectives/facets
```

---

## üîÑ Am√©liorations

### Endpoints
- ‚úÖ Ajout de 6 nouveaux endpoints dans `endpoints.py`
- ‚úÖ Support de l'API version 2025-09-15-preview
- ‚úÖ Param√®tres de requ√™te standardis√©s

### Client Python
- ‚úÖ 6 nouvelles m√©thodes dans `UnifiedCatalogClient`
- ‚úÖ Documentation compl√®te avec exemples
- ‚úÖ Gestion d'erreurs coh√©rente
- ‚úÖ Support des filtres optionnels

### CLI
- ‚úÖ 6 nouvelles commandes interactives
- ‚úÖ Affichage Rich avec arbre, tableaux et couleurs
- ‚úÖ Support JSON pour l'automatisation
- ‚úÖ Options de filtrage avanc√©es

### Documentation
- ‚úÖ Guide complet des nouvelles APIs ([UC_NEW_APIS_GUIDE.md](../doc/guides/UC_NEW_APIS_GUIDE.md))
- ‚úÖ Analyse de couverture API mise √† jour ([UC_API_COVERAGE_ANALYSIS.md](../doc/UC_API_COVERAGE_ANALYSIS.md))
- ‚úÖ Exemples Python et CLI pour chaque API
- ‚úÖ Workflows d'int√©gration

---

## üìä Statistiques de couverture API

| M√©trique | Avant (v1.6.3) | Apr√®s (v1.7.0) | √âvolution |
|----------|----------------|----------------|-----------|
| **APIs totales** | 48 | 48 | = |
| **APIs impl√©ment√©es** | 39 | 46 | +7 |
| **Couverture** | 81% | **96%** | **+15%** |
| **Facets APIs** | 0/4 | 4/4 | **+4** ‚úÖ |
| **Hierarchy APIs** | 0/1 | 1/1 | +1 |
| **Relationship APIs** | 2/3 | 3/3 | +1 |

### D√©tail par cat√©gorie

| Cat√©gorie | Impl√©ment√©es | Total | % |
|-----------|--------------|-------|---|
| Terms | 9/9 | 9 | **100%** ‚úÖ |
| Domains | 5/5 | 5 | **100%** ‚úÖ |
| Data Products | 7/7 | 7 | **100%** ‚úÖ |
| CDEs | 8/8 | 8 | **100%** ‚úÖ |
| Objectives | 6/6 | 6 | **100%** ‚úÖ |
| Key Results | 5/5 | 5 | **100%** ‚úÖ |
| Policies | 4/4 | 4 | **100%** ‚úÖ |
| Facets | 4/4 | 4 | **100%** ‚úÖ |

---

## üé® Exemples d'utilisation

### Exemple 1 : Audit de glossaire complet

```bash
# 1. Visualiser la hi√©rarchie
pvw uc term hierarchy --output tree

# 2. Analyser les statistiques
pvw uc term facets

# 3. Examiner les relations d'un terme cl√©
pvw uc term relationships --term-id <guid>
```

### Exemple 2 : Dashboard de conformit√©

```python
from purviewcli.client import UnifiedCatalogClient

client = UnifiedCatalogClient()

# Analyser les CDEs par criticit√©
facets = client.get_cde_facets({})

high_critical = facets['facets']['criticalityLevel']['High']
gdpr_coverage = facets['facets']['complianceFramework'].get('GDPR', 0)

print(f"High criticality: {high_critical}")
print(f"GDPR coverage: {gdpr_coverage}")
```

### Exemple 3 : Navigation hi√©rarchique

```python
from purviewcli.client import UnifiedCatalogClient

client = UnifiedCatalogClient()

# R√©cup√©rer la hi√©rarchie
hierarchy = client.get_terms_hierarchy({
    "--domain-id": ["<domain-guid>"],
    "--max-depth": ["3"]
})

# Parcourir l'arbre
def print_tree(terms, indent=0):
    for term in terms:
        print("  " * indent + f"- {term['name']}")
        if term.get('children'):
            print_tree(term['children'], indent + 1)

print_tree(hierarchy['hierarchyTerms'])
```

---

## üîß Fichiers modifi√©s

### Backend
- `purviewcli/client/endpoints.py` - Ajout de 4 endpoints
- `purviewcli/client/_unified_catalog.py` - Ajout de 4 m√©thodes client

### CLI
- `purviewcli/cli/unified_catalog.py` - Ajout de 4 commandes interactives

### Documentation
- `doc/guides/UC_NEW_APIS_GUIDE.md` - Guide complet (NOUVEAU)
- `doc/UC_API_COVERAGE_ANALYSIS.md` - Analyse de couverture (NOUVEAU)
- `releases/v1.7.0.md` - Ce fichier

---

## üêõ Corrections de bugs

Aucune correction de bug dans cette version - focus sur les nouvelles fonctionnalit√©s.

---

## ‚ö†Ô∏è Breaking Changes

Aucun breaking change - toutes les fonctionnalit√©s existantes sont compatibles.

---

## üì¶ Installation

### Via pip (recommand√©)

```bash
pip install --upgrade purview-cli
```

### Depuis le code source

```bash
git clone https://github.com/Keayoub/pvw-cli.git
cd pvw-cli
pip install -e .
```

### V√©rification

```bash
pvw --version
# pvw-cli, version 1.7.0

pvw uc term hierarchy --help
# Devrait afficher l'aide de la nouvelle commande
```

---

## üîÆ Prochaines versions

### v1.7.1 (Pr√©vu)
- üîß Corrections de bugs remont√©s
- üìö Am√©liorations de documentation

### v1.8.0 (Planifi√©)
- ‚ú® Data Products Facets API
- ‚ú® Objectives Facets API
- üìä Dashboards int√©gr√©s

---

## üôè Remerciements

Cette version impl√©mente les APIs identifi√©es comme priorit√© HAUTE dans l'analyse de couverture API. Un grand merci √† la communaut√© pour les retours et suggestions !

---

## üìö Ressources

- **Documentation compl√®te** : [UC_NEW_APIS_GUIDE.md](../doc/guides/UC_NEW_APIS_GUIDE.md)
- **Analyse API** : [UC_API_COVERAGE_ANALYSIS.md](../doc/UC_API_COVERAGE_ANALYSIS.md)
- **Microsoft Docs** : [Purview Unified Catalog API](https://learn.microsoft.com/en-us/rest/api/purview/purview-unified-catalog/)
- **GitHub Repository** : [Keayoub/pvw-cli](https://github.com/Keayoub/pvw-cli)

---

## üêõ Signaler un probl√®me

Si vous rencontrez un bug avec les nouvelles APIs :

1. V√©rifiez que vous utilisez la version 1.7.0 : `pvw --version`
2. Activez le mode debug : `pvw uc term hierarchy --debug`
3. Ouvrez une issue sur GitHub avec :
   - La commande compl√®te ex√©cut√©e
   - Le message d'erreur complet
   - La sortie du mode debug

---

**Version** : 1.7.0  
**Date** : 28 janvier 2026  
**Auteur** : GitHub Copilot  
**Statut** : Production Ready ‚úÖ
