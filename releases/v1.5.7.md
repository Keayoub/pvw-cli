# v1.5.7 Release Notes

## Fixes

- Added smart terminal detection for Rich console to prevent ANSI escape code rendering issues on Windows PowerShell.
- Console now respects `NO_COLOR` environment variable (industry standard).
- Auto-detects terminal capabilities and disables colors when output is piped/redirected.
- Supports `FORCE_COLOR=1` to force color output when needed.

## Details

### Smart Terminal Detection
The CLI now intelligently detects terminal capabilities to avoid ANSI escape code display issues (e.g., `←[32m`, `←[1m`) on Windows PowerShell environments.

**Environment Variables Supported:**
- `NO_COLOR=1` - Disables all color output (industry standard)
- `FORCE_COLOR=1` - Forces color output even when auto-detection would disable it
- Auto-detects when output is piped/redirected and disables colors automatically

**Changes:**
- Updated Rich Console initialization in `cli.py` with auto-detection
- `force_terminal` respects `FORCE_COLOR` env var
- `no_color` respects `NO_COLOR` env var or non-TTY output
- Maintains `legacy_windows=False` for modern Windows terminal support

### Usage
```powershell
# Disable colors globally
$env:NO_COLOR = "1"
pvw uc term list --domain-id xxx

# Force colors
$env:FORCE_COLOR = "1"
pvw uc term list --domain-id xxx
```

## Testing

- Terminal detection verified on Windows PowerShell 5.1 and PowerShell Core 7.x
- NO_COLOR env var tested and working
- Color output verified in modern terminals (pwsh, Windows Terminal)
- Piped output verified to be plain text without ANSI codes

## Version Info

- Version: 1.5.7
- Release Date: January 21, 2026
- Type: Bug Fix Release

---

Previous versions: [v1.5.6](v1.5.6.md) | [v1.5.5](v1.5.5.md) | [v1.5.4](v1.5.4.md)
